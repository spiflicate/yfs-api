```mermaid
graph TB
    subgraph "User Application"
        APP[Application Code]
    end
    
    subgraph "Yahoo Fantasy API Wrapper"
        CLIENT[YahooFantasyClient]
        
        subgraph "Authentication"
            OAUTH[OAuthClient]
            TOKEN[TokenManager]
        end
        
        subgraph "HTTP Layer"
            HTTP[HttpClient]
            RETRY[RetryLogic]
            RATE[RateLimiter]
        end
        
        subgraph "Resources"
            USER[UserResource]
            GAME[GameResource]
            LEAGUE[LeagueResource]
            TEAM[TeamResource]
            PLAYER[PlayerResource]
            TRANS[TransactionResource]
            ROSTER[RosterResource]
        end
        
        subgraph "Utilities"
            PARSE[XMLParser]
            VALID[Validators]
            FORMAT[Formatters]
        end
        
        subgraph "Type System"
            TYPES[TypeScript Types]
            COMMON[Common Types]
            NHL[NHL Types]
            NFL[NFL Types]
            MLB[MLB Types]
            NBA[NBA Types]
        end
    end
    
    subgraph "Yahoo Fantasy Sports API"
        YAHOO[Yahoo API Endpoints]
    end
    
    %% User flow
    APP --> CLIENT
    
    %% Client to resources
    CLIENT --> USER
    CLIENT --> GAME
    CLIENT --> LEAGUE
    CLIENT --> TEAM
    CLIENT --> PLAYER
    CLIENT --> TRANS
    CLIENT --> ROSTER
    
    %% Resources to HTTP
    USER --> HTTP
    GAME --> HTTP
    LEAGUE --> HTTP
    TEAM --> HTTP
    PLAYER --> HTTP
    TRANS --> HTTP
    ROSTER --> HTTP
    
    %% HTTP layer dependencies
    HTTP --> OAUTH
    HTTP --> RETRY
    HTTP --> RATE
    OAUTH --> TOKEN
    
    %% HTTP to utilities
    HTTP --> PARSE
    HTTP --> VALID
    HTTP --> FORMAT
    
    %% Resources use types
    USER -.->|uses| TYPES
    GAME -.->|uses| TYPES
    LEAGUE -.->|uses| TYPES
    TEAM -.->|uses| TYPES
    PLAYER -.->|uses| TYPES
    TRANS -.->|uses| TYPES
    ROSTER -.->|uses| TYPES
    
    %% Type hierarchy
    TYPES --> COMMON
    TYPES --> NHL
    TYPES --> NFL
    TYPES --> MLB
    TYPES --> NBA
    
    %% HTTP to Yahoo
    HTTP --> YAHOO
    
    %% Styling
    classDef primary fill:#4a90e2,stroke:#2e5c8a,stroke-width:2px,color:#fff
    classDef secondary fill:#50c878,stroke:#2d7a4a,stroke-width:2px,color:#fff
    classDef utility fill:#f39c12,stroke:#c87f0a,stroke-width:2px,color:#fff
    classDef external fill:#e74c3c,stroke:#a93226,stroke-width:2px,color:#fff
    classDef types fill:#9b59b6,stroke:#6c3483,stroke-width:2px,color:#fff
    
    class CLIENT primary
    class USER,GAME,LEAGUE,TEAM,PLAYER,TRANS,ROSTER secondary
    class OAUTH,HTTP,RETRY,RATE,PARSE,VALID,FORMAT utility
    class YAHOO external
    class TYPES,COMMON,NHL,NFL,MLB,NBA types
```

## Architecture Overview

This diagram shows the high-level architecture of the Yahoo Fantasy Sports API wrapper.

### Key Components

#### User Application Layer
- **Application Code**: The user's code that consumes the library

#### Core Client
- **YahooFantasyClient**: Main entry point that provides access to all resources

#### Authentication
- **OAuthClient**: Handles OAuth 2.0 flow with Yahoo
- **TokenManager**: Stores and refreshes access tokens

#### HTTP Layer
- **HttpClient**: Base HTTP client for making requests
- **RetryLogic**: Automatic retry with exponential backoff
- **RateLimiter**: Prevents hitting Yahoo's rate limits

#### Resources
Each resource provides methods for interacting with that part of Yahoo's API:
- **UserResource**: User operations
- **GameResource**: Game metadata
- **LeagueResource**: League operations
- **TeamResource**: Team operations
- **PlayerResource**: Player search and details
- **TransactionResource**: Add/drop, trades, waivers
- **RosterResource**: Roster management

#### Utilities
- **XMLParser**: Converts Yahoo's XML responses to JSON
- **Validators**: Input validation
- **Formatters**: Date, key formatting

#### Type System
- **Common Types**: Shared across all sports
- **Sport-Specific Types**: NHL, NFL, MLB, NBA types
- All components use TypeScript for type safety

### Data Flow

1. User calls a method on the client
2. Client delegates to appropriate resource
3. Resource validates input and calls HTTP client
4. HTTP client handles authentication via OAuth
5. Request sent to Yahoo API with retry/rate limiting
6. XML response parsed to JSON
7. Typed response returned to user

### Design Principles

- **Separation of Concerns**: Each layer has a single responsibility
- **Type Safety**: Everything is fully typed
- **Testability**: Each component can be tested independently
- **Extensibility**: New resources and sports can be added easily
